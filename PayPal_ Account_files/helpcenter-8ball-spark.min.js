!function(a){"use strict";function b(b,d){if(p=p||k()){var i,j={},l={apiBaseUrl:"https://www.paypal.com",country:"US",locale:"en_US",mountElementSelectorOld:".contextual-help-app",mountElementSelectorNew:"#hc-contextual-help-app"};"old"===p?(i=a.initHelpCenter()||{},j=i.settings||{},j.mountElementSelector=j.mountElementSelector||l.mountElementSelectorOld):"new"===p&&(j={apiBaseUrl:q.dataset.apiBaseUrl,country:q.dataset.country,locale:q.dataset.locale,mountElementSelector:l.mountElementSelectorNew}),j={apiBaseUrl:j.apiBaseUrl=g()||l.apiBaseUrl,country:j.country||l.country,locale:j.locale||l.locale,mountElementSelector:j.mountElementSelector||l.mountElementSelectorOld};var m=j.locale.split("_")[0].toLowerCase(),n=h(m)?"/smarthelp/css/minihelp-8ball.rtl.css":"/smarthelp/css/minihelp-8ball.css";f(j.apiBaseUrl+n);e(j.apiBaseUrl+"/smarthelp/js/helpcenterapi.js",j,function(){c(a,j,b,d)})}}function c(a,b,c,e){if(void 0===a.contextualHelp)return console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[loadScriptCallBack]: Contextual Help LoadScript Failed"),void(c&&(window.location.href="/smarthelp/home"));r=!1,o=a.contextualHelp,d(o,c,e)}function d(a,b,c){if(a&&b){var d=s?1350:300;try{setTimeout(function(){"function"==typeof a[b]&&a[b](c)},d)}catch(a){console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[executeContextualHelpFunction]: ",a)}}}function e(a,b,c){var d,e,f;e=!1,d=document.createElement("script"),b&&b.locale&&d.setAttribute("locale",b.locale),b&&b.country&&d.setAttribute("country",b.country),d.onload=d.onreadystatechange=function(){e||d.readyState&&"loaded"!==d.readyState&&"complete"!==d.readyState||(e=!0,c&&"function"==typeof c&&c())},d.onerror=function(){console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[loadScript]: The script '"+a+"' was not found")};var g=s?350:0;setTimeout(function(){d.src=a;try{f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(d,f)}catch(a){console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[loadScript]: ",a)}},g)}function f(a){var b=document.createElement("link");b.rel="stylesheet",b.href=a;try{document.getElementsByTagName("head")[0].appendChild(b)}catch(a){console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[loadStyleSheet]: ",a)}}function g(){return"undefined"!=typeof location&&location.protocol&&location.host?location.protocol+"//"+location.host:""}function h(a){return["ar","he","ku","az","fa","ur"].indexOf(a)>=0}function i(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(a,b){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=e[f])}return c},writable:!0,configurable:!0})}function j(){NodeList&&NodeList.prototype&&"function"!=typeof NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(a,b){b=b||window;for(var c=0;c<this.length;c++)a.call(b,this[c],c,this)})}function k(){return void 0!==a.document&&a.document.body?"function"==typeof a.initHelpCenter&&document.getElementsByClassName("contextual-help-app")[0]?"old":(q=document.getElementById("hc-contextual-help-app"),q&&q.dataset.country&&q.dataset.locale?"new":null):null}function l(a,b,c,d){b=b||200;var e=c();!e&&a?setTimeout(function(){--a,l(a,b,c,d)},b):e||a?e&&"function"==typeof d&&d():e=null}function m(){this.apiBaseUrl,this.chatLabels,this.browser,this.loadScript=function(a,b){var c=document.createElement("script");c.src=a,c.defer=!0,"function"==typeof b&&(script.onload=b);var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)},this.doGet=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){if(4==c.readyState||"complete"===c.readyState)switch(c.status){case 200:if("function"==typeof b)try{var a=JSON.parse(c.responseText);b(a)}catch(a){b({},{status:c.status,message:"Wrong response"})}break;default:"function"==typeof b&&b({},{status:c.status,message:"Chat not available"})}},c.send()}}function n(){if(document.body){var a=new m;a.doGet("/smartchat/chat-meta",function(b,c){if("object"!=typeof c){window.nodeChat?(nodeChat.labels=b.labels,nodeChat.browser=b.browser,nodeChat.country=b.country,nodeChat.token=b.csrfToken,nodeChat.deviceType=b.deviceType,nodeChat.email=b.email,nodeChat.isPhone=b.isPhone,nodeChat.chatState=b.chatState):window.nodeChat={labels:b.labels,browser:b.browser,country:b.country,token:b.csrfToken,deviceType:b.deviceType,email:b.email,isPhone:b.isPhone,chatState:b.chatState},window.nodeChat.chatState&&window.nodeChat.chatState.conversationId||sessionStorage.removeItem("org.cometd.reload"),window.Promise?a.loadScript(b.chatScript):a.loadScript("https://www.paypalobjects.com/helpcenter/vendor/bluebird.js",function(){a.loadScript(b.chatScript)})}})}else u++,u<10?setTimeout(n,200):console.error("[chat-error]::[helpcenter-8ball-spark.js]::[mountChat]: Body takes more than 2000 ms to be parsed")}!function(){i(),j(),"undefined"!=typeof window&&a===window||console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[_sanityChecksAndPolyfills]: Window is not the `root` for this script, unexpected behaviour will occur"),void 0===a.helpcenterapi&&(a.helpcenterapi=function(){})}();var o,p,q,r=!0,s=function(){return navigator.userAgent.indexOf("Trident/")>=0}(),t="contextual:history-tracker";try{a.helpCenterSpark=function(a,c){r?l(6,500,k,function(){b(a,c)}):d(o,a,c)},function(a){sessionStorage&&sessionStorage["reduxPersist:viewport"]&&JSON.parse(sessionStorage["reduxPersist:viewport"]).show&&"function"==typeof a?(a(),window.sessionStorage.setItem("contextual:display-tracker",!0)):window.sessionStorage.setItem("contextual:display-tracker",!1)}(function(){l(6,500,k,function(){b()})}),function(a){var b=a.document.title,c=a.sessionStorage.getItem(t);if("string"==typeof c){var d=c.split("|");if(!Array.isArray(d)||d.indexOf(b)>=0)return;d.push(b),d.length>1&&d.shift(),a.sessionStorage.setItem(t,d.join("|"))}else a.sessionStorage.setItem(t,b)}(a),function(a){a.document.addEventListener("click",function(b){b=b||a.event;var c=b.target||b.srcElement,d=c.textContent||c.innerText,e=["a","p","button","span","input"];if("string"==typeof c.tagName&&e.indexOf(c.tagName.toLowerCase())>=0){var f=a.document.getElementById("contextual-help");if(f&&f.contains(c))return null;var g=a.sessionStorage.getItem(t);if("string"==typeof g&&"string"==typeof d&&d.length>0&&a.sessionStorage.setItem(t,g+"["+d.slice(0,25)+"]"),b.target.href||b.srcElement&&b.srcElement.href){var h=c.outerHTML;"string"!=typeof h||-1===h.indexOf("footer-contact")&&-1===h.indexOf("footer_contact")||a.sessionStorage.setItem("showContactOptions","true")}}},!1)}(a),function(a){try{var b=new XMLHttpRequest;b.open("GET",a),b.send()}catch(a){console.warn("XHRRequest error: ",a)}}("/smarthelp/refund-prefetch")}catch(a){console.error("[contextual-help-error]::[helpcenter-8ball-spark.js]::[helpcenter8ballSpark]: ",a)}var u=0;n()}(this);
